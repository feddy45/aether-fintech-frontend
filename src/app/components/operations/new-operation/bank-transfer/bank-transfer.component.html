<form (ngSubmit)="onSubmit()" [formGroup]="bankTransferForm">
  <div class="container">
    <div class="first-line">
      <aef-input-label inputId="card" label="Seleziona una carta">
        <p-select [options]="cards()" formControlName="card" id="card" optionLabel="description" />
      </aef-input-label>
      <aef-input-label inputId="beneficiary" label="Beneficiario">
        <p-inputgroup>
          <input formControlName="beneficiary" id="beneficiary" pInputText />
          <p-inputgroup-addon>
            <p-button (onClick)="showBeneficiaryDialog.set(true)" icon="pi pi-address-book" severity="secondary"
                      variant="text" />
          </p-inputgroup-addon>
        </p-inputgroup>
      </aef-input-label>
    </div>
    <div class="second-line">
      <div class="iban-container">
        <aef-input-label inputId="iban" label="IBAN">
          <input formControlName="iban" id="iban" pInputText />
        </aef-input-label>
      </div>
      <div class="amount-container">
        <aef-input-label inputId="amount" label="Importo">
          <p-inputNumber currency="EUR" formControlName="amount" inputId="amount" locale="it-IT"
                         mode="currency"></p-inputNumber>
        </aef-input-label>
      </div>
    </div>
    <div class="third-line">
      <aef-input-label inputId="description" label="Causale">
        <textarea formControlName="description" id="description" pTextarea rows="2"></textarea>
      </aef-input-label>
    </div>
    <div class="button-container">
      <p-button [disabled]="!bankTransferForm.valid" severity="primary" type="submit">Inserisci bonifico</p-button>
    </div>
  </div>
</form>

<aef-beneficiaries-dialog (selectBeneficiary)="beneficiarySelected($event)" [(showDialog)]="showBeneficiaryDialog" />

<p-dialog [(visible)]="dialogVisible" [modal]="true" [style]="{ width: '25rem' }"
          header="Bonifico inserito con successo!">
  <span class="p-text-secondary block mb-8">Vuoi inserire un nuovo bonifico o tornare alla schermata dell'elenco delle operazioni?</span>
  <div class="flex justify-end gap-2">
    <p-button (click)="goToOperationList()" label="Lista operazioni" severity="secondary" />
    <p-button (click)="newOperation()" label="Nuovo bonifico" />
  </div>
</p-dialog>
